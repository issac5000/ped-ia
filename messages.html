<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Messages priv√©s</title>
  <link rel="stylesheet" href="assets/style.css?v=6" />
  <style>
    .chat-area{display:flex;gap:20px;margin-top:20px;height:70vh;align-items:stretch}
    .parent-list{flex:0 0 250px;height:100%;overflow-y:auto}
    #parents-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:12px}
    .parent-item{display:flex;align-items:flex-start;gap:8px;padding:8px;cursor:pointer;border-radius:12px;width:100%}
    .parent-item.active{background:rgba(255,255,255,.1)}
    .parent-item .meta{flex:1}
    .parent-item .name{font-weight:600; display:flex; align-items:center; gap:6px}
    .parent-item time{display:block;font-size:.75rem;opacity:.7;color:var(--muted,#666)}
    .parent-item .del-btn{background:none;border:none;color:var(--muted,#666);cursor:pointer;padding:2px;margin-left:auto}
    .parent-item .del-btn:hover{color:#c00}
    .chat-window{flex:1;display:none;flex-direction:column;height:100%}
    .chat-window.open{display:flex}
    .chat-placeholder{flex:1;display:flex;align-items:center;justify-content:center;height:100%;text-align:center}
    #conversation{flex:1;overflow-y:auto}
    /* Ensure my sent bubbles use solid black text */
    .chat-window .bubble.user{color:#000}
    /* Small green dot for unread conversations */
    .dot-unread{display:inline-block;width:8px;height:8px;border-radius:50%;background:var(--ok,#2dc07a);box-shadow:0 0 0 2px rgba(255,255,255,.12)}
    @media(max-width:600px){
        .chat-area{flex-direction:column;height:auto}
        .parent-list{flex:0 0 auto;width:100%;max-height:30vh;height:auto}
        .chat-window{flex:1 1 auto;width:100%;min-height:70vh;height:auto}
        .chat-placeholder{flex:1 1 auto;width:100%;min-height:70vh;height:auto}
      }
  </style>
</head>
<body class="no-js">
  <div id="loading-overlay"><div class="loader"></div><button id="refresh-btn" class="btn btn-secondary" hidden>Forcer le chargement</button></div>
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="/#/">
        <img src="/logotexte.png" alt="Synap'Kids" width="377" height="74" decoding="async" fetchpriority="high" class="brand-text-logo" />
      </a>
      <nav id="main-nav" class="main-nav" aria-label="Navigation principale">
        <a href="/#/" class="nav-link"><span class="nav-ico">üè†</span><span>Accueil</span></a>
        <a href="/#/dashboard" class="nav-link"><span class="nav-ico">üìä</span><span>Dashboard</span></a>
        <a href="/#/community" class="nav-link"><span class="nav-ico">üí¨</span><span>Communaut√©</span></a>
        <a href="messages.html" class="nav-link"><span class="nav-ico">üì®</span><span>Messages</span></a>
        <a href="/#/ai" class="nav-link"><span class="nav-ico">ü§ñ</span><span>Fonctionnalit√© IA</span></a>
        <a href="blog.html" class="nav-link"><span class="nav-ico">üìù</span><span>Articles de blog</span></a>
        <a href="/#/settings" class="nav-link"><span class="nav-ico">‚öôÔ∏è</span><span>Param√®tres</span></a>
        <a href="/#/about" class="nav-link"><span class="nav-ico">‚ÑπÔ∏è</span><span>√Ä propos</span></a>
      </nav>
      <div class="auth-actions">
        <button id="nav-toggle" class="nav-toggle" aria-controls="main-nav" aria-expanded="false" title="Menu">‚ò∞</button>
        <span id="login-status" class="login-status" hidden aria-label="Connect√©" title="Connect√©"></span>
        <button id="btn-login" class="btn btn-secondary">Se connecter</button>
        <button id="btn-logout" class="btn btn-secondary" hidden>Se d√©connecter</button>
      </div>
    </div>
  </header>
  <div id="page-logo" class="page-logo" hidden>
    <div class="container">
      <img src="/logo.png" alt="Logo" class="page-logo-img" loading="lazy" decoding="async" />
    </div>
  </div>
  <div id="nav-backdrop" class="nav-backdrop" aria-hidden="true"></div>
  <main class="container">
    <div class="page-header">
      <h2>Discussion priv√©e</h2>
      <p class="page-subtitle">Pour plus d‚Äôintimit√©s</p>
    </div>
    <div class="chat-area">
      <aside class="parent-list card">
        <ul id="parents-list"></ul>
      </aside>
      <section id="chat-placeholder" class="chat-placeholder card">
        <div class="stack" style="margin:auto">
          <p class="muted">S√©lectionnez une conversation pour commencer</p>
        </div>
      </section>
      <section class="chat-window card">
        <div id="conversation" class="chat-messages"></div>
        <form id="message-form" class="chat-input" autocomplete="off">
          <div class="chat-row">
            <textarea id="message-input" class="chat-textarea" rows="1" placeholder="√âcris ici‚Ä¶" required></textarea>
            <button class="btn btn-primary chat-send" type="submit">Envoyer</button>
          </div>
        </form>
      </section>
    </div>
  </main>
  <footer class="site-footer home-footer">
    <div class="footer-bg" aria-hidden="true">
      <svg viewBox="0 0 1440 600" preserveAspectRatio="none">
        <path class="layer rev" fill="rgba(255,255,255,.08)" d="M0,152 C240,130 500,160 760,136 C1040,110 1260,146 1440,132 L1440,600 L0,600 Z"></path>
        <path class="layer" fill="rgba(32,38,50,.18)" d="M0,134 C220,110 460,140 740,112 C1020,86 1200,126 1440,104 L1440,600 L0,600 Z"></path>
        <path class="layer rev" fill="rgba(26,32,42,.26)" d="M0,118 C200,80 460,130 760,92 C1060,54 1220,120 1440,86 L1440,600 L0,600 Z"></path>
        <path class="layer" fill="rgba(18,22,29,.38)" d="M0,96 C240,20 420,150 720,64 C1020,-12 1240,150 1440,44 L1440,600 L0,600 Z"></path>
      </svg>
    </div>
    <div class="container">
      <div class="footer-top">
        <div class="footer-brand">
          <a class="brand" href="/#/" aria-label="Accueil Synap'Kids">
            <img src="/logo.png" alt="Synap'Kids" class="footer-logo" />
          </a>
          <p>Le copilote parental 0‚Äì3 ans, pour suivre en douceur l‚Äô√©volution de votre enfant.</p>
        </div>
        <nav class="footer-col" aria-label="Liens utiles">
          <h4>Liens utiles</h4>
          <ul class="footer-links">
            <li><a href="/#/">Accueil</a></li>
            <li><a href="/#/dashboard">Dashboard</a></li>
            <li><a href="/#/ai">Fonctionnalit√© IA</a></li>
            <li><a href="/#/community">Communaut√©</a></li>
            <li><a href="messages.html">Messages</a></li>
            <li><a href="blog.html">Articles de blog</a></li>
            <li><a href="/#/settings">Param√®tres</a></li>
          </ul>
        </nav>
        <nav class="footer-col" aria-label="Contenus">
          <h4>Contenus</h4>
          <ul class="footer-links">
            <li><a href="les-1000-premiers-jours.html">Les 1000 premiers jours</a></li>
            <li><a href="la-theorie-de-l-esprit.html">La th√©orie de l‚Äôesprit</a></li>
            <li><a href="la-theorie-de-l-attachement.html">La th√©orie de l‚Äôattachement</a></li>
          </ul>
        </nav>
        <div class="footer-col" aria-label="L√©gal">
          <h4>L√©gal</h4>
          <ul class="footer-links">
            <li><a href="/#/about">√Ä propos</a></li>
            <li><a href="/#/legal">Mentions l√©gales</a></li>
            <li><a href="/#/legal">Confidentialit√©</a></li>
          </ul>
        </div>
        <div class="footer-col" aria-label="Contact">
          <h4>Contact</h4>
          <ul class="footer-links">
            <li><a href="/#/contact">Formulaire de contact</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <span>¬© 2025 Synap'Kids ‚Äî Infos indicatives, pas de conseil m√©dical</span>
      </div>
    </div>
  </footer>
  <script src="assets/loading.js"></script>
  <script type="module" src="assets/messages.js"></script>
</body>
</html>
